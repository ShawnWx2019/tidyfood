),
card(
height = 300,
style = "resize:vertical;",full_screen = T,wrapper = T,
card_header("Sample information"),
card_body(
min_height = 250,
"dddd"
)
),
card(
height = 300,full_screen = T,
style = "resize:both;",
card_header("Sample information"),
card_body(
min_height = 250,
"dddd"
)
),
)),
nav_menu(
title = 'Data Cleaning',icon = bs_icon("wind"),
nav_panel(title = "Summary",icon = bs_icon("align-center"),
sidebar(title = 'parameters',id = 's1'),"Summary..."),
nav_panel(title = 'Remove noisy features',icon = bs_icon("trash"),
sidebar(title = 'parameters',id = 's2'),"remove noise"),
nav_panel(title = "Remove outliers",icon = bs_icon("trash"), "outlier"),
nav_panel(title = 'Normalization',icon = bs_icon("list-nested"),"Normalization"),
nav_panel(title = 'Integration',icon = bs_icon("list"),"Normalization"),
)
)
server = function(...) {
bs_themer()
# no server logic required
}
shinyApp(ui, server)
# load package ------------------------------------------------------------
library(shiny)
library(bslib)
library(bsicons)
library(shinyFiles)
# ui ---------------------------------------------------------------------
ui = page_navbar(
theme = bs_theme(bootswatch = "zephyr"),
title = "Tidyfood",
id = "nav",
nav_panel(title = "Homepage",icon = bs_icon("house"), "Home page..."),
nav_panel(title = 'Initialize project',icon = bs_icon("airplane"),
layout_sidebar(
sidebar = sidebar(
title = "Project initiation",
shinyDirButton(id = "prj_wd", label = "Set working directory" ,
title = "Set working directory:",
buttonType = "default", class = NULL,
icon = bs_icon("folder"), multiple = FALSE),
tags$span(textOutput(outputId = "raw_wd_path"), class = "text-wrap"),
fileInput(
inputId = 'SampleInfo',
label = 'Sample Information',
multiple = FALSE,
accept = '.csv'
)
),
card(
height = 300,full_screen = T,wrapper = T,
style = "resize:vertical;",
card_header("Check your input"),
card_body(
#        min_height = 250,
"dddd"
)
),
card(
height = 300,
style = "resize:vertical;",full_screen = T,wrapper = T,
card_header("Sample information"),
card_body(
min_height = 250,
"dddd"
)
),
card(
height = 300,full_screen = T,
style = "resize:both;",
card_header("Sample information"),
card_body(
min_height = 250,
"dddd"
)
),
)),
nav_menu(
title = 'Data Cleaning',icon = bs_icon("wind"),
nav_panel(title = "Summary",icon = bs_icon("align-center"),
sidebar(title = 'parameters',id = 's1'),"Summary..."),
nav_panel(title = 'Remove noisy features',icon = bs_icon("trash"),
sidebar(title = 'parameters',id = 's2'),"remove noise"),
nav_panel(title = "Remove outliers",icon = bs_icon("trash"), "outlier"),
nav_panel(title = 'Normalization',icon = bs_icon("list-nested"),"Normalization"),
nav_panel(title = 'Integration',icon = bs_icon("list"),"Normalization"),
)
)
server = function(...) {
bs_themer()
# no server logic required
}
shinyApp(ui, server)
# load package ------------------------------------------------------------
library(shiny)
library(bslib)
library(bsicons)
library(shinyFiles)
# ui ---------------------------------------------------------------------
ui = page_navbar(
theme = bs_theme(bootswatch = "flatly"),
title = "Tidyfood",
id = "nav",
nav_panel(title = "Homepage",icon = bs_icon("house"), "Home page..."),
nav_panel(title = 'Initialize project',icon = bs_icon("airplane"),
layout_sidebar(
sidebar = sidebar(
title = "Project initiation",
shinyDirButton(id = "prj_wd", label = "Set working directory" ,
title = "Set working directory:",
buttonType = "default", class = NULL,
icon = bs_icon("folder"), multiple = FALSE),
tags$span(textOutput(outputId = "raw_wd_path"), class = "text-wrap"),
fileInput(
inputId = 'SampleInfo',
label = 'Sample Information',
multiple = FALSE,
accept = '.csv'
)
),
card(
height = 300,full_screen = T,wrapper = T,
style = "resize:vertical;",
card_header("Check your input"),
card_body(
#        min_height = 250,
"dddd"
)
),
card(
height = 300,
style = "resize:vertical;",full_screen = T,wrapper = T,
card_header("Sample information"),
card_body(
min_height = 250,
"dddd"
)
),
card(
height = 300,full_screen = T,
style = "resize:both;",
card_header("Sample information"),
card_body(
min_height = 250,
"dddd"
)
),
)),
nav_menu(
title = 'Data Cleaning',icon = bs_icon("wind"),
nav_panel(title = "Summary",icon = bs_icon("align-center"),
sidebar(title = 'parameters',id = 's1'),"Summary..."),
nav_panel(title = 'Remove noisy features',icon = bs_icon("trash"),
sidebar(title = 'parameters',id = 's2'),"remove noise"),
nav_panel(title = "Remove outliers",icon = bs_icon("trash"), "outlier"),
nav_panel(title = 'Normalization',icon = bs_icon("list-nested"),"Normalization"),
nav_panel(title = 'Integration',icon = bs_icon("list"),"Normalization"),
)
)
server = function(...) {
bs_themer()
# no server logic required
}
shinyApp(ui, server)
runApp('R/test.R')
runApp('R/test.R')
library(tidymass)
normalize_data
integrate_data
load("/Volumes/ShawnWang/ZCY-test/Result/NEG/Objects/step1/object_neg_impute.rda")
xx = object_neg_impute %>%
extract_expression_data()
min(xx)
max(xx)
object_neg_svr = normalize_data(method = 'svr')
object_neg_svr = normalize_data(object = object_neg_impute,method = 'svr')
xx2 = object_neg_svr %>% extract_expression_data()
min(xx2)
object_neg_impute_mix <- object_neg_impute %>%
activate_mass_dataset("sample_info") %>%
mutate(batch = 1)
object_neg_svr2 = normalize_data(object = object_neg_impute_mix,method = 'svr')
xx3 = object_neg_svr2 %>% extract_expression_data()
min(xx3)
normalize_data
xx2 = object_neg_svr %>% extract_expression_data()
min(xx2)
xx3 = object_neg_svr2 %>% extract_expression_data()
min(xx3)
xx = object_neg_impute %>%
extract_expression_data()
min(xx)
res_impute_mv = object_neg_impute %>%
extract_expression_data()
min(res_impute_mv)
res_svr_norm = object_neg_svr %>% extract_expression_data()
min(res_svr_norm)
normalize_data
normalize_data_svr
normalize_data_svr
min(res_svr_norm)
res_svr_norm
res_svr_norm %>%
filter(rowSums(. < 0) > 0)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0)
xx
xx[1:10,1:10]
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id")
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value')
xx
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
filter(value < 0)
xx
View(xx)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
filter(value < 0) %>% sort(sample)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
filter(value < 0) %>% arrange(sample)
View(xx)
res_svr_norm2 = object_neg_svr2 %>% extract_expression_data()
xx2 =
res_svr_norm2 %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
filter(value < 0) %>% arrange(sample)
xx2
View(xx2)
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
rownames()
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
res_svr_norm2 = object_neg_svr2 %>% extract_expression_data()
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id")
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pull('variable_id')
xx2
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
filter(value < 0) %>% arrange(sample)
xx
View(xx)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(sample)
View(xx)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC"))
View(xx)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C7602')
View(xx)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC"))
View(xx)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C7630')
View(xx)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC"))
View(xx)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7630')
xx3 = object_neg_impute %>% extract_expression_data() %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7630')
View(xx3)
xx3 = object_neg_impute %>% extract_expression_data() %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7630')
View(xx3)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7610')
View(xx)
xx3 = object_neg_impute %>% extract_expression_data() %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7610')
View(xx3)
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pull(variable_id) %>% distinct()
xx =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pull(variable_id) %>% unique()
xx
load("/Volumes/ShawnWang/ZCY-test/Result/NEG/Objects/step1/object_neg_mv.rda")
xx3 = object_neg_mv %>% extract_expression_data() %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7610')
xx3
xx3 = object_neg_mv %>% extract_expression_data() %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7630')
xx3
xx3 %>% pull(value)
xx4 = object_neg_mv %>% extract_expression_data() %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7610')
xx4 %>% pull(value)
xx3 %>% pull(value) %>% boxplot()
xx3 %>% pull(value) %>% fivenum()
xx4 %>% pull(value) %>% fivenum()
object_neg_mv %>%
extract_annotation_table() %>%
select("QC")
object_neg_mv %>%
extract_annotation_table() %>%
select(contains("QC"))
object_neg_mv %>%
extract_expression_data() %>%
select(contains("QC"))
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC"))
xx =
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC")) %>%
rowwise() %>%
mutate(mean = mean(c_across(everything())))
xx =
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC")) %>%
rowwise() %>%
mutate(mean = mean(c_across(everything()),na.rm = T),
sd = sd(c_across(everything()),na.rm = T))
xx =
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC")) %>%
rowwise() %>%
mutate(mean = mean(c_across(everything()),na.rm = T),
sd = sd(c_across(everything()),na.rm = T)) %>%
dplyr::select(mean,sd) %>%
mutate(rsd = (sd / mean) * 100)
xx
xx =
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC")) %>%
rownames_to_column('variable_id') %>%
rowwise() %>%
mutate(mean = mean(c_across(!variable_id),na.rm = T),
sd = sd(c_across(!variable_id),na.rm = T)) %>%
dplyr::select(mean,sd) %>%
mutate(rsd = (sd / mean) * 100) %>%
arrange(rsd)
xx
xx =
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC")) %>%
rownames_to_column('variable_id') %>%
rowwise() %>%
mutate(mean = mean(c_across(!variable_id),na.rm = T),
sd = sd(c_across(!variable_id),na.rm = T)) %>%
dplyr::select(variable_id,mean,sd) %>%
mutate(rsd = (sd / mean) * 100) %>%
arrange(rsd)
xx
xx =
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC")) %>%
rownames_to_column('variable_id') %>%
rowwise() %>%
mutate(mean = mean(c_across(!variable_id),na.rm = T),
sd = sd(c_across(!variable_id),na.rm = T)) %>%
dplyr::select(variable_id,mean,sd) %>%
mutate(rsd = (sd / mean) * 100) %>%
arrange(desc(rsd))
xx
xx
xx_rsd =
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC")) %>%
rownames_to_column('variable_id') %>%
rowwise() %>%
mutate(mean = mean(c_across(!variable_id),na.rm = T),
sd = sd(c_across(!variable_id),na.rm = T)) %>%
dplyr::select(variable_id,mean,sd) %>%
mutate(rsd = (sd / mean) * 100) %>%
arrange(desc(rsd))
xx_rsd
xx_neg =
res_svr_norm %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pull(variable_id) %>% unique()
xx_neg
xx_neg =
res_svr_norm2 %>%
filter(rowSums(. < 0) > 0) %>% rownames_to_column("variable_id") %>%
pull(variable_id) %>% unique()
xx_neg
xx_rsd =
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC")) %>%
rownames_to_column('variable_id') %>%
rowwise() %>%
mutate(mean = mean(c_across(!variable_id),na.rm = T),
sd = sd(c_across(!variable_id),na.rm = T)) %>%
dplyr::select(variable_id,mean,sd) %>%
mutate(rsd = (sd / mean) * 100) %>%
arrange(desc(sd))
xx_neg
xx_rsd
xx_rsd =
object_neg_mv %>%
extract_expression_data() %>%
dplyr::select(contains("QC")) %>%
rownames_to_column('variable_id') %>%
rowwise() %>%
mutate(mean = mean(c_across(!variable_id),na.rm = T),
sd = sd(c_across(!variable_id),na.rm = T)) %>%
dplyr::select(variable_id,mean,sd) %>%
mutate(rsd = (sd / mean) * 100) %>%
arrange(desc(rsd))
xx_rsd
data.frame(
variable_id = xx_neg
) %>% left_join(xx_rsd)
xx3 = object_neg_mv %>% extract_expression_data() %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(vtariable_id == 'C_7630')
xx3 = object_neg_mv %>% extract_expression_data() %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7630')
xx3 = object_neg_norm %>% extract_expression_data() %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7630')
xx3 = object_neg_svr %>% extract_expression_data() %>% rownames_to_column("variable_id") %>%
pivot_longer(!variable_id,names_to = "sample",values_to = 'value') %>%
arrange(value) %>% filter(str_detect(sample,"QC")) %>%
filter(variable_id == 'C_7630')
xx3
object_neg_svr %>% extract_process_info()
